# 概论
OS是指控制和管理整个计算机系统的硬件和软件资源，并合理地组织调度计算机的工作和资源的分配；以提供给用户和其他软件方便的接口和环境；他是计算机系统中最基本的系统软件。

## 四大特征

### 并发
指两个或多个事件在同一时间间隔内发生。这些事件宏观上是同时发生的，但是微观上是交替发生的。
**并行**：指两个或多个事件在同一时刻同时发生。

操作系统的并发性指OS在“同时”运行多个程序，这些程序宏观上看是同时运行的，而围观上是交替运行的。

单核CPU同一时刻只能执行一个程序，各个程序只能**并发**地执行。
多核CPU同一时刻可以同时执行多个程序，多个程序可以**并行**执行。

### 共享
即资源共享，指OS中地资源可供内存中多个并发执行地进程共同使用。

两种资源共享：
- 互斥共享方式 OS中某些资源，虽然可以提供给多个进程使用，但同一时间段内只允许一个进程访问该资源
- 同时共享方式 允许一个时间段内由多个进程“同时”对他们进行访问
  
### 虚拟
指把一个物理上地实体变成若干个逻辑上地对应物。物理实体（前者）是实际存在地，而逻辑上对应物（后者）是用户感受到地。

一个程序需要存放进内存并给它分配CPU才能执行。

虚拟技术：
    - 空分复用技术（如虚拟存储器技术）
    - 时分复用技术（如虚拟处理器）

**没用并发性，就谈不上虚拟性**

### 异步性

指多导程序环境下，允许多个程序并发执行，但由于资源有限，进程地执行并不是一贯到底，而是走走停停，以不可预知地速度向前推进。



## OS发展与分类

### 手工操作阶段
[![pSjf8nx.md.png](https://s1.ax1x.com/2023/02/22/pSjf8nx.md.png)](https://imgse.com/i/pSjf8nx)


### 批处理阶段

#### 单道批处理系统
引入脱机输入/输出技术（外围及+磁带完成），并由**监督程序**负责控制作业输入和输出。

[![pSjfw3d.md.png](https://s1.ax1x.com/2023/02/22/pSjfw3d.md.png)](https://imgse.com/i/pSjfw3d)

#### 多道批处理系统
操作系统正式诞生，用于支持多道程序并发运行。

[![pSjhtrq.md.png](https://s1.ax1x.com/2023/02/22/pSjhtrq.md.png)](https://imgse.com/i/pSjhtrq)


### 分时操作系统
计算机以**时间片**位单位**轮流位各个用户/作业服务**，用户可以通过终端与计算机进行交互。

主要优点： 用户请求可以被即时响应，**解决了人机交互问题**，允许多个用户同时使用一台计算机，并且用户对计算机的操作相互独立，感受不到别人的存在。

主要缺点：**不能处理一些紧急任务**


### 实时操作系统

主要优点：能够优先响应一些紧急任务，某些紧急任务不需要时间片排队。在实施操作系统的控制下，OS接收到外部信号后及时处理，并且**要在严格的时限内处理完事件**。实时操作系统的主要特点是**及时性和可靠性**。

实时操作系统：
    - 硬实时操作系统 必须绝对严格的规定时间内完成处理
    - 软实时操作系统 能接受偶尔违反时间规定


### 网络操作系统

伴随计算机网络发展而诞生的，可以把网络中各个计算机有机地结合起来，实现数据传送等功能，**实现网络中各种资源地共享（如文件共享）和各台计算机之间地通信**


### 分布式操作系统
主要特点是**分布型和并行性**。OS中各台计算机地位相同，**任何工作都可以分布在这些计算机上，由它们并行、协同完成这个任务**。


### 个人计算机操作系统
如Window，MacOS，Linux等



## OS的运行机制

“指令”就是CPU能识别、执行的最基本命令。

CPU由两种状态，**内核态**和**用户态**。
处于**内核态**时，说明此时正在运行**内核程序**，可以执行**特权指令**

处于**用户态**时，说明此时正在运行**应用程序**，可以执行**非特权指令**

CPU有一个寄存器叫**程序状态字寄存器**，其中有个二进制位，1表示“内核态”，0表示“用户态”

[![pSjoPOA.md.png](https://s1.ax1x.com/2023/02/22/pSjoPOA.md.png)](https://imgse.com/i/pSjoPOA)

## 中断和异常

“中断”是让OS内核夺回CPU使用权的唯一途径！

### 内中断（已称异常、例外）
与当前执行的指令有关，中断信号来源于CPU内部

- 陷阱、陷入（trap）
- 故障（fault）
- 终止（abort）

### 外中断（也称中断）
与当前执行指令无关，中断信号来源于CPU外部

- 时钟中断
- I/O中断请求

---
不同的中断信号，需要使用不同的中断处理程序来处理。当CPU检测到中断信号后，会根据中断信号的类型去查询“中断向量表”，以此来找到相应的中断处理程序在内存中存放的位置。

[![pSjo7h8.md.png](https://s1.ax1x.com/2023/02/22/pSjo7h8.md.png)](https://imgse.com/i/pSjo7h8)

