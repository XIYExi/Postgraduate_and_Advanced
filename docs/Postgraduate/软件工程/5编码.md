# 编码

- 目的
  把模块的过程性描述翻译成选定的程序设计语言书写的源程序
- 依据
  编码的主要依据就是概要设计和星系设计说明文档
- 任务
  - 理解概要设计和详细设计说明书
  - 遵循编码原则和风格进行翻译，形成源码

## 选择标准

- 系统用户要求
  如果开发系统由用户维护，通常要求用熟悉的语言书写
- 可以使用的编译程序
  运行目标系统环境可提供编译程序限制可选用语言的范围
- 可以得到的软件工具
  有支持程序开发的软件工具可以使用
- 工程规模
  规模庞大，现有语言不适用，设计实现供该工程项目使用程序设计语言
- 程序员知识
  如果和其他标准不矛盾，应该选择程序员熟悉的语言
- 软件可移植性要求
  若目标系统在不同计算机上运行，选择可移植性好的语言
- 软件的应用领域
  选择语言时应充分考虑目标系统的应用范围

## 编码风格

逻辑简明清晰、易读易懂是重要标准。
编码风格应该遵守以下五个方面规则：

- 程序内部的文档
- 数据说明
- 语句构造（简单）
- 输入输出
- 效率（和存储容量）

### 程序内部文档

1. 恰当的描述符

   - 命名规则一致
   - 避免过长或过短（建议英文）
   - 缩写规则一致
   - 函数用大写字母开头单词

2. 适当注解，源程序中有效注解量在 20%以上

   - 序言性注释
     模块开始，描述模块功能，主要算法、接口特点、重要数据及开发简史
   - 中间注解
     插在程序中间，解释这段代码的必要性和功能。

3. 良好的视觉组织：空格、空行、缩进

### 数据说明

- 数据说明次序应标准化
  **常量 - 简单变量 - 数组 - 公用数据块 - 文件整形 - 实型 - 字符 - 逻辑**
- 多个变量名在一个语句说明，按字母顺序排列
- 复杂数据结构用注解说明实现方法和特点

### 语句构造

- 避免把多个语句写在同一行
- 尽量避免复杂条件测试
- 尽量见少“非”条件测试
- 避免大量使用循环嵌套和条件嵌套
- 利用括号使表达式运算次序清晰直观
- 尽量少用 goto 语句
- 不将 bool 值得 true 和 false 对应 1 和 0 编程
- 多数编程语言：false 定义为 0，非 0 值为 true

### 输入输出

- 对所有输入数据都进行校验，保证输入有效
- 检查输入项重要组合合法性
- 保持输入格式简单
- 使用数据结束标记，不要求用户制定数据数目
- 提示交互式输入请求，如可用选择或边界数值
- 程序设计语言对格式有严格要求时，应保持输入格式一致
- 设计良好的输出报表
- 给所有输出数据加标志

### 编码效率

1. 程序运行时间
   - 简化算法和逻辑表达式
   - 嵌套循环，确定是由有语句可从内层向外迁移
   - 尽量避免使用多维数组
   - 尽量避免使用指针和复杂的表
   - 使用执行时间短的算术运算
   - 不要混合使用不同的数据类型
   - 尽量使用证书运算和布尔表达式
2. 存储器效率
3. 输入输出效率
